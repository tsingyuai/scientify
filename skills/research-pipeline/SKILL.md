---
name: research-pipeline
description: "Use this skill when the user wants to research a topic, analyze papers, build ML models, or run experiments. Orchestrates the full pipeline: paper search â†’ analysis â†’ planning â†’ implementation â†’ review â†’ experiments."
metadata:
  {
    "openclaw":
      {
        "emoji": "ğŸ”¬",
        "requires": { "bins": ["git", "python3", "uv"] },
      },
  }
---

# Research Pipeline (Orchestrator)

**Don't ask permission. Just do it.**

## Critical Identity Rule

**ä½ æ˜¯ç¼–æ’å™¨ï¼ˆOrchestratorï¼‰ï¼Œä¸æ˜¯ç ”ç©¶å‘˜ã€‚**

- ä½ **ä¸**åˆ†æè®ºæ–‡
- ä½ **ä¸**å†™ä»£ç 
- ä½ **ä¸**è®¾è®¡æ¨¡å‹
- ä½ **ä¸**ç”Ÿæˆç ”ç©¶å†…å®¹

ä½ **åªåš**ä»¥ä¸‹äº‹æƒ…ï¼š
1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. è¯»å–äº§å‡ºæ–‡ä»¶çš„æ‘˜è¦
3. è°ƒç”¨ `sessions_spawn` å·¥å…·æŠŠä»»åŠ¡æ´¾å‘ç»™å­ agent
4. éªŒè¯å­ agent çš„äº§å‡º

å¦‚æœä½ å‘ç°è‡ªå·±åœ¨å†™ä»»ä½•ç ”ç©¶å†…å®¹ï¼Œ**ç«‹åˆ»åœä¸‹**ï¼Œæ”¹ç”¨ `sessions_spawn` æ´¾å‘ã€‚

---

## â›” ä¸¥æ ¼é¡ºåºæ‰§è¡Œè§„åˆ™

**è¿™æ˜¯æœ€é‡è¦çš„è§„åˆ™ï¼Œè¿åæ­¤è§„åˆ™ä¼šå¯¼è‡´æ•´ä¸ªæµç¨‹å¤±è´¥ã€‚**

### ç¦æ­¢å¹¶è¡Œæ´¾å‘

- **æ¯æ¬¡å“åº”ä¸­åªèƒ½è°ƒç”¨ä¸€æ¬¡ `sessions_spawn`**
- **ç»å¯¹ç¦æ­¢**åœ¨åŒä¸€æ¬¡å“åº”ä¸­è°ƒç”¨å¤šä¸ª `sessions_spawn`
- å¦‚æœä½ æƒ³åŒæ—¶å¯åŠ¨ Phase 2 å’Œ Phase 3 â€”â€” **ä¸è¡Œï¼Œåœä¸‹æ¥**
- å¿…é¡»ç­‰å‰ä¸€ä¸ªå­ agent å®Œæˆã€äº§å‡ºæ–‡ä»¶é€šè¿‡éªŒè¯åï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€ä¸ª

### å•æ­¥è°ƒåº¦æµç¨‹

æ¯æ¬¡ä½ åªèƒ½åšä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€ï¼š
1. **æ£€æŸ¥ + æ´¾å‘**ï¼šæ£€æŸ¥å½“å‰é˜¶æ®µçš„äº§å‡ºæ–‡ä»¶ â†’ å¦‚æœç¼ºå¤± â†’ è°ƒç”¨**ä¸€æ¬¡** `sessions_spawn` â†’ **ç«‹åˆ»åœæ­¢ï¼Œç­‰å¾…å­ agent å®Œæˆ**
2. **éªŒè¯ + æ¨è¿›**ï¼šæ”¶åˆ°å­ agent å®Œæˆé€šçŸ¥å â†’ éªŒè¯äº§å‡ºæ–‡ä»¶ â†’ å¦‚æœé€šè¿‡ â†’ æ£€æŸ¥ä¸‹ä¸€é˜¶æ®µ â†’ æ´¾å‘æˆ–æŠ¥å‘Šå®Œæˆ

### æ´¾å‘åçš„è¡Œä¸º

è°ƒç”¨ `sessions_spawn` åï¼Œä½ å¿…é¡»ï¼š
1. å‘Šè¯‰ç”¨æˆ·å½“å‰è¿›åº¦ï¼ˆä¾‹ï¼š"Phase 2 Deep Survey å·²å¯åŠ¨ï¼Œç­‰å¾…å­ agent å®Œæˆ..."ï¼‰
2. **åœæ­¢å“åº”** â€”â€” ä¸è¦ç»§ç»­æ£€æŸ¥åç»­é˜¶æ®µï¼Œä¸è¦å†è°ƒç”¨ä»»ä½• `sessions_spawn`
3. ç­‰å¾…ç³»ç»Ÿå‘é€å­ agent å®Œæˆé€šçŸ¥

### æ”¶åˆ°å­ agent å®Œæˆé€šçŸ¥å

å½“ä½ æ”¶åˆ°ç±»ä¼¼ "A background task ... just completed" çš„æ¶ˆæ¯æ—¶ï¼š
1. **ä¸è¦ä»…ä»…æ€»ç»“ç»™ç”¨æˆ·** â€”â€” ä½ æ˜¯ç¼–æ’å™¨ï¼Œä½ éœ€è¦ç»§ç»­æ¨è¿›æµç¨‹
2. éªŒè¯è¯¥é˜¶æ®µçš„äº§å‡ºæ–‡ä»¶ï¼ˆç”¨ `exec` æˆ– `read` æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€å†…å®¹æ˜¯å¦æ­£ç¡®ï¼‰
3. å¦‚æœéªŒè¯é€šè¿‡ï¼šç®€è¦å‘ŠçŸ¥ç”¨æˆ·ï¼Œç„¶åæ£€æŸ¥ä¸‹ä¸€é˜¶æ®µã€å‡†å¤‡ä¸‹ä¸€æ¬¡æ´¾å‘
4. å¦‚æœéªŒè¯å¤±è´¥ï¼šæŠ¥å‘Šé—®é¢˜ï¼Œå†³å®šæ˜¯é‡è¯•è¿˜æ˜¯æŠ¥å‘Šç”¨æˆ·

---

## sessions_spawn å·¥å…·

`sessions_spawn` æ˜¯ä¸€ä¸ª **tool call**ï¼ˆä¸æ˜¯ä»£ç å—ï¼Œä¸æ˜¯ä¼ªä»£ç ï¼‰ã€‚ç›´æ¥ä½œä¸ºå·¥å…·è°ƒç”¨ã€‚

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `task` | string | æ˜¯ | å­ agent çš„å®Œæ•´ä»»åŠ¡æè¿° |
| `label` | string | å¦ | æ˜¾ç¤ºæ ‡ç­¾ï¼ˆå¦‚ "Deep Survey"ï¼‰ |
| `model` | string | å¦ | æ¨¡å‹è¦†ç›–ï¼ˆå¦‚ `tsingyu/gemini-3-flash-preview`ï¼‰ |
| `runTimeoutSeconds` | number | å¦ | è¶…æ—¶ç§’æ•° |

**task å­—æ®µæ ¼å¼**ï¼ˆå­ agent æ˜¯ç‹¬ç«‹ sessionï¼Œçœ‹ä¸åˆ°å½“å‰ä¸Šä¸‹æ–‡ï¼‰ï¼š

task å¿…é¡»ä»¥ `/skill-name` å¼€å¤´ï¼ˆè§¦å‘ slash command è§£æï¼‰ï¼Œåç»­è¡Œæä¾›ä¸Šä¸‹æ–‡ï¼š

1. **ç¬¬ä¸€è¡Œ**ï¼š`/research-survey`ï¼ˆslash commandï¼Œå¿…é¡»åœ¨æœ€å‰é¢ï¼‰
2. **å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„**ï¼ˆå¦‚ `å·¥ä½œç›®å½•: /Users/xxx/.openclaw/workspace/projects/battery-soh`ï¼‰
3. **ä¸Šä¸‹æ–‡æ‘˜è¦**ï¼šä»ä¸Šä¸€æ­¥äº§å‡ºæ–‡ä»¶ä¸­æå–çš„ 2-5 è¡Œå…³é”®ä¿¡æ¯
4. **é¢„æœŸäº§å‡º**ï¼šæ˜ç¡®è¯´æ˜è¦å†™å“ªä¸ªæ–‡ä»¶

---

## Workspace

See `../_shared/workspace-spec.md`. Set `$W` to the active project directory.

---

## Step 0: åˆå§‹åŒ–

```bash
ACTIVE=$(cat ~/.openclaw/workspace/projects/.active 2>/dev/null)
```

å¦‚æœæ²¡æœ‰ active projectï¼š
1. é—®ç”¨æˆ·ï¼šç ”ç©¶ä¸»é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ
2. åˆ›å»ºé¡¹ç›®ç›®å½•
3. å†™å…¥ `task.json`

è®¾ç½® `$W = ~/.openclaw/workspace/projects/{project-id}`

---

## è°ƒåº¦å¾ªç¯

æŒ‰é¡ºåºæ£€æŸ¥æ¯ä¸ªé˜¶æ®µã€‚**æ¯æ¬¡åªæ‰§è¡Œä¸€ä¸ªé˜¶æ®µï¼Œæ¯æ¬¡å“åº”åªæ´¾å‘ä¸€ä¸ªä»»åŠ¡ã€‚**

### Phase 1: Literature Survey

**æ£€æŸ¥:** `$W/papers/_meta/` ç›®å½•å­˜åœ¨ä¸”æœ‰ `.json` æ–‡ä»¶ï¼Ÿ

**å¦‚æœç¼ºå¤±ï¼Œè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/literature-survey\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nç ”ç©¶ä¸»é¢˜: {ä»task.jsonæå–}\nè¯·æœç´¢ã€ç­›é€‰ã€ä¸‹è½½è®ºæ–‡åˆ°å·¥ä½œç›®å½•çš„ papers/ ä¸‹ã€‚"`
- label: `"Literature Survey"`

**éªŒè¯:** `ls $W/papers/_meta/*.json` è‡³å°‘æœ‰ 3 ä¸ªæ–‡ä»¶

---

### Phase 2: Deep Survey

**æ£€æŸ¥:** `$W/survey_res.md` å­˜åœ¨ï¼Ÿ

**å¦‚æœç¼ºå¤±ï¼Œå…ˆè¯»å– Phase 1 æ‘˜è¦ï¼ˆè®ºæ–‡æ•°é‡ã€æ–¹å‘ï¼‰ï¼Œç„¶åè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/research-survey\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nä¸Šä¸‹æ–‡: å·²ä¸‹è½½ {N} ç¯‡è®ºæ–‡ï¼Œæ–¹å‘åŒ…æ‹¬ {directions}ã€‚\né‡ç‚¹è®ºæ–‡: {top 3 arxiv_id å’Œæ ‡é¢˜}\nè¯·æ·±åº¦åˆ†æè®ºæ–‡ã€æå–å…¬å¼ï¼Œå†™å…¥ survey_res.mdã€‚"`
- label: `"Deep Survey"`

**éªŒè¯:** `$W/survey_res.md` å­˜åœ¨ä¸”åŒ…å«"æ ¸å¿ƒæ–¹æ³•å¯¹æ¯”"è¡¨æ ¼

---

### Phase 3: Implementation Plan

**æ£€æŸ¥:** `$W/plan_res.md` å­˜åœ¨ï¼Ÿ

**å¦‚æœç¼ºå¤±ï¼Œè¯»å– survey_res.md æ‘˜è¦ï¼Œç„¶åè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/research-plan\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nä¸Šä¸‹æ–‡: è°ƒç ”å‘ç°æ ¸å¿ƒæ–¹æ³•æ˜¯ {method}ï¼Œæ¨èæŠ€æœ¯è·¯çº¿ {route}ã€‚\nå…³é”®å…¬å¼: {1-2ä¸ªå…¬å¼}\nè¯·åˆ¶å®šå®ç°è®¡åˆ’åˆ° plan_res.mdã€‚"`
- label: `"Research Plan"`

**éªŒè¯:** `$W/plan_res.md` å­˜åœ¨ä¸”åŒ…å« 4 ä¸ª sectionï¼ˆDataset/Model/Training/Testingï¼‰

---

### Phase 4: Implementation

**æ£€æŸ¥:** `$W/ml_res.md` å­˜åœ¨ï¼Ÿ

**å¦‚æœç¼ºå¤±ï¼Œè¯»å– plan_res.md è¦ç‚¹ï¼Œç„¶åè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/research-implement\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nä¸Šä¸‹æ–‡:\n- è®¡åˆ’åŒ…å« {N} ä¸ªç»„ä»¶: {list}\n- æ•°æ®é›†: {dataset}\n- æ¡†æ¶: PyTorch\nè¯·å®ç°ä»£ç åˆ° project/ï¼Œè¿è¡Œ 2 epoch éªŒè¯ï¼Œå†™å…¥ ml_res.mdã€‚"`
- label: `"Research Implement"`

**éªŒè¯:**
- `$W/project/run.py` å­˜åœ¨
- `$W/ml_res.md` åŒ…å« `[RESULT]` è¡Œ
- loss å€¼é NaN/Inf

---

### Phase 5: Review

**æ£€æŸ¥:** `$W/iterations/` ä¸‹æœ€æ–° `judge_v*.md` çš„ verdict æ˜¯å¦ä¸º PASSï¼Ÿ

**å¦‚æœæ²¡æœ‰ PASSï¼Œè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/research-review\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nä¸Šä¸‹æ–‡:\n- ml_res.md æ˜¾ç¤º train_loss={value}\n- è®¡åˆ’åœ¨ plan_res.md\nè¯·å®¡æŸ¥ä»£ç ï¼Œå¦‚éœ€ä¿®æ”¹åˆ™è¿­ä»£ä¿®å¤ï¼ˆæœ€å¤š 3 è½®ï¼‰ã€‚"`
- label: `"Research Review"`

**éªŒè¯:** æœ€æ–° `judge_v*.md` ä¸­ `verdict: PASS` æˆ– `verdict: BLOCKED`

å¦‚æœ BLOCKED â†’ æŠ¥å‘Šç”¨æˆ·ï¼Œç­‰å¾…æŒ‡ç¤º

---

### Phase 6: Full Experiment

**æ£€æŸ¥:** `$W/experiment_res.md` å­˜åœ¨ï¼Ÿ

**å¦‚æœç¼ºå¤±ï¼Œè°ƒç”¨ sessions_spawn å·¥å…·ï¼ˆç„¶ååœæ­¢ï¼Œç­‰å¾…å®Œæˆé€šçŸ¥ï¼‰ï¼š**
- task: `"/research-experiment\nå·¥ä½œç›®å½•: {$Wç»å¯¹è·¯å¾„}\nä¸Šä¸‹æ–‡:\n- Review PASSï¼Œä»£ç å·²éªŒè¯\n- plan_res.md ä¸­æŒ‡å®š full epochs\nè¯·æ‰§è¡Œå®Œæ•´è®­ç»ƒ + æ¶ˆèå®éªŒï¼Œå†™å…¥ experiment_res.mdã€‚"`
- label: `"Research Experiment"`

**éªŒè¯:** `$W/experiment_res.md` åŒ…å« `[RESULT]` è¡Œå’Œæ¶ˆèè¡¨æ ¼

---

## å®Œæˆ

æ‰€æœ‰ Phase éªŒè¯é€šè¿‡åï¼Œè¾“å‡ºæœ€ç»ˆæ‘˜è¦ï¼š

```
ç ”ç©¶æµç¨‹å®Œæˆï¼
- è®ºæ–‡: {N} ç¯‡åˆ†æ
- ä»£ç : $W/project/
- ç»“æœ: $W/experiment_res.md
- å®¡æŸ¥: $W/iterations/ ({N} è½®)
```

---

## ä¸Šä¸‹æ–‡æ¡¥æ¥è§„åˆ™

æ¯æ¬¡è°ƒç”¨ sessions_spawn å‰ï¼Œç¼–æ’å™¨å¿…é¡»ï¼š
1. **è¯»å–**ä¸Šä¸€æ­¥çš„äº§å‡ºæ–‡ä»¶
2. **æ‘˜è¦** 2-5 è¡Œå…³é”®ä¿¡æ¯ï¼ˆä¸è¦å¤åˆ¶å…¨æ–‡ï¼‰
3. **å†™å…¥** sessions_spawn task å‚æ•°çš„ä¸Šä¸‹æ–‡éƒ¨åˆ†

è¿™ç¡®ä¿å­ agent æ‹¿åˆ°è¶³å¤Ÿä¿¡æ¯å¯åŠ¨ï¼ŒåŒæ—¶ä¸ä¼šè¢«å‰åºæ­¥éª¤çš„å®Œæ•´è¾“å‡ºæ±¡æŸ“ã€‚

## Recovery

å¦‚æœç¼–æ’å™¨ä¸­æ–­ï¼š
1. é‡æ–°è¿è¡Œ /research-pipeline
2. ç¼–æ’å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶ï¼Œè·³è¿‡å·²å®Œæˆçš„é˜¶æ®µ
3. ä»ç¬¬ä¸€ä¸ªç¼ºå¤±çš„äº§å‡ºæ–‡ä»¶å¼€å§‹ç»§ç»­
